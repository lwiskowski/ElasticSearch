[2016-04-18 03:11:08,113][INFO ][node                     ] [Tombstone] version[3.0.0-SNAPSHOT], pid[3770], build[6508b0f/2016-04-18T06:58:38.616Z]
[2016-04-18 03:11:08,114][INFO ][node                     ] [Tombstone] initializing ...
[2016-04-18 03:11:08,303][INFO ][plugins                  ] [Tombstone] modules [lang-mustache], plugins [], sites []
[2016-04-18 03:11:08,320][INFO ][env                      ] [Tombstone] using [1] data paths, mounts [[/ (/dev/disk1)]], net usable_space [112.4gb], net total_space [232.6gb], spins? [unknown], types [hfs]
[2016-04-18 03:11:08,320][INFO ][env                      ] [Tombstone] heap size [989.8mb], compressed ordinary object pointers [true]
[2016-04-18 03:11:09,738][INFO ][node                     ] [Tombstone] initialized
[2016-04-18 03:11:09,738][INFO ][node                     ] [Tombstone] starting ...
[2016-04-18 03:11:09,817][INFO ][transport                ] [Tombstone] publish_address {127.0.0.1:58798}, bound_addresses {[fe80::1]:58796}, {[::1]:58797}, {127.0.0.1:58798}
[2016-04-18 03:11:09,824][INFO ][discovery                ] [Tombstone] modules_lang-mustache_integTest/0hJVbOlSRxOMScs53OG8yw
[2016-04-18 03:11:12,855][INFO ][cluster.service          ] [Tombstone] new_master {Tombstone}{0hJVbOlSRxOMScs53OG8yw}{127.0.0.1}{127.0.0.1:58798}[testattr=>test], reason: zen-disco-join(elected_as_master, [0] joins received)
[2016-04-18 03:11:12,872][INFO ][http                     ] [Tombstone] publish_address {127.0.0.1:58807}, bound_addresses {[fe80::1]:58805}, {[::1]:58806}, {127.0.0.1:58807}
[2016-04-18 03:11:12,873][INFO ][node                     ] [Tombstone] started
[2016-04-18 03:11:12,882][INFO ][gateway                  ] [Tombstone] recovered [0] indices into cluster_state
[2016-04-18 03:11:14,898][INFO ][cluster.metadata         ] [Tombstone] [.scripts] creating index, cause [auto(index api)], templates [], shards [1]/[0], mappings [mustache]
[2016-04-18 03:11:15,020][INFO ][cluster.routing.allocation] [Tombstone] Cluster health status changed from [RED] to [GREEN] (reason: [shards started [[.scripts][0]] ...]).
[2016-04-18 03:11:15,290][INFO ][cluster.metadata         ] [Tombstone] [test] creating index, cause [auto(index api)], templates [], shards [5]/[1], mappings [testtype]
[2016-04-18 03:11:15,330][INFO ][cluster.routing.allocation] [Tombstone] Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[test][4], [test][4]] ...]).
[2016-04-18 03:11:15,345][INFO ][cluster.metadata         ] [Tombstone] [test] update_mapping [testtype]
[2016-04-18 03:11:15,449][INFO ][cluster.metadata         ] [Tombstone] [test_1] creating index, cause [auto(index api)], templates [], shards [5]/[1], mappings [test]
[2016-04-18 03:11:15,489][INFO ][cluster.routing.allocation] [Tombstone] Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[test_1][4], [test_1][4]] ...]).
[2016-04-18 03:11:15,497][INFO ][cluster.metadata         ] [Tombstone] [test_1] update_mapping [test]
[2016-04-18 03:11:15,616][INFO ][cluster.metadata         ] [Tombstone] [.scripts] creating index, cause [auto(index api)], templates [], shards [1]/[0], mappings [mustache]
[2016-04-18 03:11:15,627][INFO ][cluster.routing.allocation] [Tombstone] Cluster health status changed from [RED] to [GREEN] (reason: [shards started [[.scripts][0]] ...]).
[2016-04-18 03:11:15,683][INFO ][cluster.metadata         ] [Tombstone] [.scripts] creating index, cause [auto(index api)], templates [], shards [1]/[0], mappings [mustache]
[2016-04-18 03:11:15,693][INFO ][cluster.routing.allocation] [Tombstone] Cluster health status changed from [RED] to [GREEN] (reason: [shards started [[.scripts][0]] ...]).
[2016-04-18 03:11:15,727][INFO ][rest.suppressed          ] /_search/template/1 Params: {id=1}
java.lang.IllegalArgumentException: Unable to parse [{"query":{"match{{}}_all":{}},"size":"{{my_size}}"}] lang [mustache]
	at org.elasticsearch.script.ScriptService.validate(ScriptService.java:379)
	at org.elasticsearch.script.ScriptService.putScriptToIndex(ScriptService.java:393)
	at org.elasticsearch.action.indexedscripts.put.TransportPutIndexedScriptAction.doExecute(TransportPutIndexedScriptAction.java:51)
	at org.elasticsearch.action.indexedscripts.put.TransportPutIndexedScriptAction.doExecute(TransportPutIndexedScriptAction.java:37)
	at org.elasticsearch.action.support.TransportAction.doExecute(TransportAction.java:113)
	at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:101)
	at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:74)
	at org.elasticsearch.client.node.NodeClient.doExecute(NodeClient.java:65)
	at org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:387)
	at org.elasticsearch.client.FilterClient.doExecute(FilterClient.java:57)
	at org.elasticsearch.rest.BaseRestHandler$HeadersAndContextCopyClient.doExecute(BaseRestHandler.java:88)
	at org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:387)
	at org.elasticsearch.client.support.AbstractClient.putIndexedScript(AbstractClient.java:535)
	at org.elasticsearch.rest.action.script.RestPutIndexedScriptAction.handleRequest(RestPutIndexedScriptAction.java:106)
	at org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:58)
	at org.elasticsearch.rest.RestController.executeHandler(RestController.java:212)
	at org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:173)
	at org.elasticsearch.http.HttpServer.internalDispatchRequest(HttpServer.java:138)
	at org.elasticsearch.http.HttpServer$Dispatcher.dispatchRequest(HttpServer.java:96)
	at org.elasticsearch.http.netty.NettyHttpServerTransport.dispatchRequest(NettyHttpServerTransport.java:392)
	at org.elasticsearch.http.netty.HttpRequestHandler.messageReceived(HttpRequestHandler.java:67)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.elasticsearch.http.netty.pipelining.HttpPipeliningHandler.messageReceived(HttpPipeliningHandler.java:85)
	at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:88)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.handler.codec.http.HttpChunkAggregator.messageReceived(HttpChunkAggregator.java:145)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.handler.codec.http.HttpContentDecoder.messageReceived(HttpContentDecoder.java:108)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:459)
	at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:536)
	at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:435)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:83)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: com.github.mustachejava.MustacheException: Empty mustache in query-template:1
	at com.github.mustachejava.MustacheParser.compile(MustacheParser.java:110)
	at com.github.mustachejava.MustacheParser.compile(MustacheParser.java:38)
	at com.github.mustachejava.DefaultMustacheFactory.compile(DefaultMustacheFactory.java:179)
	at com.github.mustachejava.DefaultMustacheFactory.compile(DefaultMustacheFactory.java:174)
	at org.elasticsearch.script.mustache.MustacheScriptEngineService.compile(MustacheScriptEngineService.java:89)
	at org.elasticsearch.script.ScriptService.validate(ScriptService.java:368)
	... 57 more
[2016-04-18 03:11:15,731][INFO ][rest.suppressed          ] /_search/template/1 Params: {id=1}
java.lang.IllegalArgumentException: Unable to parse [{"query":{"match{{}}_all":{}},"size":"{{my_size}}"}] lang [mustache]
	at org.elasticsearch.script.ScriptService.validate(ScriptService.java:379)
	at org.elasticsearch.script.ScriptService.putScriptToIndex(ScriptService.java:393)
	at org.elasticsearch.action.indexedscripts.put.TransportPutIndexedScriptAction.doExecute(TransportPutIndexedScriptAction.java:51)
	at org.elasticsearch.action.indexedscripts.put.TransportPutIndexedScriptAction.doExecute(TransportPutIndexedScriptAction.java:37)
	at org.elasticsearch.action.support.TransportAction.doExecute(TransportAction.java:113)
	at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:101)
	at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:74)
	at org.elasticsearch.client.node.NodeClient.doExecute(NodeClient.java:65)
	at org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:387)
	at org.elasticsearch.client.FilterClient.doExecute(FilterClient.java:57)
	at org.elasticsearch.rest.BaseRestHandler$HeadersAndContextCopyClient.doExecute(BaseRestHandler.java:88)
	at org.elasticsearch.client.support.AbstractClient.execute(AbstractClient.java:387)
	at org.elasticsearch.client.support.AbstractClient.putIndexedScript(AbstractClient.java:535)
	at org.elasticsearch.rest.action.script.RestPutIndexedScriptAction.handleRequest(RestPutIndexedScriptAction.java:106)
	at org.elasticsearch.rest.BaseRestHandler.handleRequest(BaseRestHandler.java:58)
	at org.elasticsearch.rest.RestController.executeHandler(RestController.java:212)
	at org.elasticsearch.rest.RestController.dispatchRequest(RestController.java:173)
	at org.elasticsearch.http.HttpServer.internalDispatchRequest(HttpServer.java:138)
	at org.elasticsearch.http.HttpServer$Dispatcher.dispatchRequest(HttpServer.java:96)
	at org.elasticsearch.http.netty.NettyHttpServerTransport.dispatchRequest(NettyHttpServerTransport.java:392)
	at org.elasticsearch.http.netty.HttpRequestHandler.messageReceived(HttpRequestHandler.java:67)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.elasticsearch.http.netty.pipelining.HttpPipeliningHandler.messageReceived(HttpPipeliningHandler.java:85)
	at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:88)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.handler.codec.http.HttpChunkAggregator.messageReceived(HttpChunkAggregator.java:145)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.handler.codec.http.HttpContentDecoder.messageReceived(HttpContentDecoder.java:108)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:459)
	at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:536)
	at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:435)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:83)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: com.github.mustachejava.MustacheException: Empty mustache in query-template:1
	at com.github.mustachejava.MustacheParser.compile(MustacheParser.java:110)
	at com.github.mustachejava.MustacheParser.compile(MustacheParser.java:38)
	at com.github.mustachejava.DefaultMustacheFactory.compile(DefaultMustacheFactory.java:179)
	at com.github.mustachejava.DefaultMustacheFactory.compile(DefaultMustacheFactory.java:174)
	at org.elasticsearch.script.mustache.MustacheScriptEngineService.compile(MustacheScriptEngineService.java:89)
	at org.elasticsearch.script.ScriptService.validate(ScriptService.java:368)
	... 57 more
[2016-04-18 03:11:15,745][INFO ][cluster.metadata         ] [Tombstone] [test] creating index, cause [auto(index api)], templates [], shards [5]/[1], mappings [testtype]
[2016-04-18 03:11:15,774][INFO ][cluster.routing.allocation] [Tombstone] Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[test][4]] ...]).
[2016-04-18 03:11:15,779][INFO ][cluster.metadata         ] [Tombstone] [test] update_mapping [testtype]
[2016-04-18 03:11:15,811][INFO ][cluster.metadata         ] [Tombstone] [.scripts] creating index, cause [auto(index api)], templates [], shards [1]/[0], mappings [mustache]
[2016-04-18 03:11:15,824][INFO ][cluster.routing.allocation] [Tombstone] Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[.scripts][0]] ...]).
[2016-04-18 03:11:15,858][DEBUG][action.search.type       ] [Tombstone] [test][2], node[0hJVbOlSRxOMScs53OG8yw], [P], v[2], s[STARTED], a[id=pdEq6mbdSNa89mFaEJhw2Q]: Failed to execute [org.elasticsearch.action.search.SearchRequest@352251bd] lastShard [true]
RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]];
Caused by: java.lang.IllegalArgumentException: Unable to find on disk file script [simple1] using lang [mustache]
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:286)
	at org.elasticsearch.script.ScriptService.compile(ScriptService.java:256)
	at org.elasticsearch.script.ScriptService.executable(ScriptService.java:441)
	at org.elasticsearch.search.SearchService.createContext(SearchService.java:569)
	at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:535)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:286)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:354)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:351)
	at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:65)
	at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:342)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[2016-04-18 03:11:15,858][DEBUG][action.search.type       ] [Tombstone] [test][0], node[0hJVbOlSRxOMScs53OG8yw], [P], v[2], s[STARTED], a[id=Qgg13TjsQSCug9E_PWj-Yw]: Failed to execute [org.elasticsearch.action.search.SearchRequest@352251bd] lastShard [true]
RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]];
Caused by: java.lang.IllegalArgumentException: Unable to find on disk file script [simple1] using lang [mustache]
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:286)
	at org.elasticsearch.script.ScriptService.compile(ScriptService.java:256)
	at org.elasticsearch.script.ScriptService.executable(ScriptService.java:441)
	at org.elasticsearch.search.SearchService.createContext(SearchService.java:569)
	at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:535)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:286)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:354)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:351)
	at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:65)
	at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:342)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[2016-04-18 03:11:15,858][DEBUG][action.search.type       ] [Tombstone] [test][4], node[0hJVbOlSRxOMScs53OG8yw], [P], v[2], s[STARTED], a[id=lWBD7ozPRAK0IQxwhso4Qg]: Failed to execute [org.elasticsearch.action.search.SearchRequest@352251bd] lastShard [true]
RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]];
Caused by: java.lang.IllegalArgumentException: Unable to find on disk file script [simple1] using lang [mustache]
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:286)
	at org.elasticsearch.script.ScriptService.compile(ScriptService.java:256)
	at org.elasticsearch.script.ScriptService.executable(ScriptService.java:441)
	at org.elasticsearch.search.SearchService.createContext(SearchService.java:569)
	at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:535)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:286)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:354)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:351)
	at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:65)
	at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:342)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[2016-04-18 03:11:15,858][DEBUG][action.search.type       ] [Tombstone] [.scripts][0], node[0hJVbOlSRxOMScs53OG8yw], [P], v[2], s[STARTED], a[id=fS8bPWsJQgSvABw2z66utQ]: Failed to execute [org.elasticsearch.action.search.SearchRequest@352251bd] lastShard [true]
RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]];
Caused by: java.lang.IllegalArgumentException: Unable to find on disk file script [simple1] using lang [mustache]
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:286)
	at org.elasticsearch.script.ScriptService.compile(ScriptService.java:256)
	at org.elasticsearch.script.ScriptService.executable(ScriptService.java:441)
	at org.elasticsearch.search.SearchService.createContext(SearchService.java:569)
	at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:535)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:286)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:354)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:351)
	at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:65)
	at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:342)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[2016-04-18 03:11:15,858][DEBUG][action.search.type       ] [Tombstone] [test][1], node[0hJVbOlSRxOMScs53OG8yw], [P], v[2], s[STARTED], a[id=moHkiS0OQ4SPq0qxkzGeuQ]: Failed to execute [org.elasticsearch.action.search.SearchRequest@352251bd] lastShard [true]
RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]];
Caused by: java.lang.IllegalArgumentException: Unable to find on disk file script [simple1] using lang [mustache]
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:286)
	at org.elasticsearch.script.ScriptService.compile(ScriptService.java:256)
	at org.elasticsearch.script.ScriptService.executable(ScriptService.java:441)
	at org.elasticsearch.search.SearchService.createContext(SearchService.java:569)
	at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:535)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:286)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:354)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:351)
	at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:65)
	at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:342)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[2016-04-18 03:11:15,858][DEBUG][action.search.type       ] [Tombstone] [test][3], node[0hJVbOlSRxOMScs53OG8yw], [P], v[2], s[STARTED], a[id=y1KUMQNBQkWfJf2oYFO0Pw]: Failed to execute [org.elasticsearch.action.search.SearchRequest@352251bd]
RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]];
Caused by: java.lang.IllegalArgumentException: Unable to find on disk file script [simple1] using lang [mustache]
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:286)
	at org.elasticsearch.script.ScriptService.compile(ScriptService.java:256)
	at org.elasticsearch.script.ScriptService.executable(ScriptService.java:441)
	at org.elasticsearch.search.SearchService.createContext(SearchService.java:569)
	at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:535)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:286)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:354)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:351)
	at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:65)
	at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:342)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[2016-04-18 03:11:15,860][DEBUG][action.search.type       ] [Tombstone] All shards failed for phase: [query]
RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]];
Caused by: java.lang.IllegalArgumentException: Unable to find on disk file script [simple1] using lang [mustache]
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:286)
	at org.elasticsearch.script.ScriptService.compile(ScriptService.java:256)
	at org.elasticsearch.script.ScriptService.executable(ScriptService.java:441)
	at org.elasticsearch.search.SearchService.createContext(SearchService.java:569)
	at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:535)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:286)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:354)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:351)
	at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:65)
	at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:342)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[2016-04-18 03:11:15,860][INFO ][rest.suppressed          ] /_search/template Params: {}
Failed to execute phase [query], all shards failed; shardFailures {[0hJVbOlSRxOMScs53OG8yw][.scripts][0]: RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]]; }{[0hJVbOlSRxOMScs53OG8yw][test][0]: RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]]; }{[0hJVbOlSRxOMScs53OG8yw][test][1]: RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]]; }{[0hJVbOlSRxOMScs53OG8yw][test][2]: RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]]; }{[0hJVbOlSRxOMScs53OG8yw][test][3]: RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]]; }{[0hJVbOlSRxOMScs53OG8yw][test][4]: RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:231)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:175)
	at org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:46)
	at org.elasticsearch.transport.TransportService$DirectResponseChannel.processException(TransportService.java:802)
	at org.elasticsearch.transport.TransportService$DirectResponseChannel.sendResponse(TransportService.java:780)
	at org.elasticsearch.transport.TransportService$4.onFailure(TransportService.java:353)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:39)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: RemoteTransportException[[Tombstone][127.0.0.1:58798][indices:data/read/search[phase/query]]]; nested: IllegalArgumentException[Unable to find on disk file script [simple1] using lang [mustache]];
Caused by: java.lang.IllegalArgumentException: Unable to find on disk file script [simple1] using lang [mustache]
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:286)
	at org.elasticsearch.script.ScriptService.compile(ScriptService.java:256)
	at org.elasticsearch.script.ScriptService.executable(ScriptService.java:441)
	at org.elasticsearch.search.SearchService.createContext(SearchService.java:569)
	at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:535)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:286)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:354)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:351)
	at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:65)
	at org.elasticsearch.transport.TransportService$4.doRun(TransportService.java:342)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
[2016-04-18 03:11:15,895][INFO ][cluster.metadata         ] [Tombstone] [test] creating index, cause [auto(index api)], templates [], shards [5]/[1], mappings [testtype]
[2016-04-18 03:11:15,921][INFO ][cluster.routing.allocation] [Tombstone] Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[test][4], [test][4]] ...]).
[2016-04-18 03:11:15,926][INFO ][cluster.metadata         ] [Tombstone] [test] update_mapping [testtype]
[2016-04-18 03:11:15,997][INFO ][rest.suppressed          ] /_render/template Params: {}
ScriptException[Failed to compile inline script [{ "query": { "match": { "text": "{{{my_value}}" } }, "size": {{my_size}} }] using lang [mustache]]; nested: MustacheException[Improperly closed variable in query-template:1];
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:312)
	at org.elasticsearch.script.ScriptService.compile(ScriptService.java:256)
	at org.elasticsearch.script.ScriptService.executable(ScriptService.java:441)
	at org.elasticsearch.action.admin.cluster.validate.template.TransportRenderSearchTemplateAction$1.doRun(TransportRenderSearchTemplateAction.java:60)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: com.github.mustachejava.MustacheException: Improperly closed variable in query-template:1
	at com.github.mustachejava.MustacheParser.compile(MustacheParser.java:171)
	at com.github.mustachejava.MustacheParser.compile(MustacheParser.java:38)
	at com.github.mustachejava.DefaultMustacheFactory.compile(DefaultMustacheFactory.java:179)
	at com.github.mustachejava.DefaultMustacheFactory.compile(DefaultMustacheFactory.java:174)
	at org.elasticsearch.script.mustache.MustacheScriptEngineService.compile(MustacheScriptEngineService.java:89)
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:310)
	... 7 more
[2016-04-18 03:11:16,006][INFO ][rest.suppressed          ] /_render/template Params: {}
ScriptException[Failed to compile inline script [{"query":{"match":{"text":"{{{my_value}}"}},"aggs":{"my_terms":{"terms":{"field":"{{my_field}}"}}}}] using lang [mustache]]; nested: MustacheException[Improperly closed variable in query-template:1];
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:312)
	at org.elasticsearch.script.ScriptService.compile(ScriptService.java:256)
	at org.elasticsearch.script.ScriptService.executable(ScriptService.java:441)
	at org.elasticsearch.action.admin.cluster.validate.template.TransportRenderSearchTemplateAction$1.doRun(TransportRenderSearchTemplateAction.java:60)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: com.github.mustachejava.MustacheException: Improperly closed variable in query-template:1
	at com.github.mustachejava.MustacheParser.compile(MustacheParser.java:171)
	at com.github.mustachejava.MustacheParser.compile(MustacheParser.java:38)
	at com.github.mustachejava.DefaultMustacheFactory.compile(DefaultMustacheFactory.java:179)
	at com.github.mustachejava.DefaultMustacheFactory.compile(DefaultMustacheFactory.java:174)
	at org.elasticsearch.script.mustache.MustacheScriptEngineService.compile(MustacheScriptEngineService.java:89)
	at org.elasticsearch.script.ScriptService.compileInternal(ScriptService.java:310)
	... 7 more
